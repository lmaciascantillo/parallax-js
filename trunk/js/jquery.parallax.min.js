(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,f){var c=(new Date).getTime(),g=Math.max(0,16-(c-a)),h=window.setTimeout(function(){b(c+g)},g);a=c+g;return h});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(b){clearTimeout(b)})})();function LayerModifier(a){var b=this;this.bias=this.step=this.pos=0;this.ease=function(b,a){return b*a};void 0!==a&&(this.step=void 0!==a.step?a.step:this.step,this.ease=void 0!==a.ease?a.ease:this.ease,this.bias=void 0!==a.bias?a.bias:this.bias);this.update=function(a){null!=b.ease&&(b.pos=b.ease(a,b.step));b.pos+=b.bias}}
function Layer(a){var b=null,c=null,d=null;this.update=function(a){c.update(a);d.update(a);b.css("background-position",c.pos+"px "+d.pos+"px")};configure=function(a){b=a.element;var e=b.css("background-position").split(" ");xpos=parseInt(e[0].substr(0,e[0].length-2));ypos=parseInt(e[1].substr(0,e[1].length-2));c=new LayerModifier(a.xlayer);c.pos=xpos;d=new LayerModifier(a.ylayer);d.pos=ypos};configure(a)}
function ParallaxScroller(a){function b(a){if(0==f||a-f>=e)c.render(a/1E3),f=a;requestAnimationFrame(b)}var c=this,d=[],f=0,e=1E3/60;this.addLayer=function(a){d.push(a)};this.start=function(){requestAnimationFrame(b)};this.render=function(a){for(var b=0;b<d.length;++b)d[b].update(a)};void 0!==a&&(e=void 0!==a.fps?1E3/a.fps:1E3/60)}(function(a){a.fn.parallax=function(a){this.each(function(){(new ParallaxScrollerAPI(a)).applyParallax(this)})}})(jQuery);
function ParallaxScrollerAPI(a){this.applyParallax=function(b){this.setupCss(b,a);this.setupParallax(b,a)};this.setupCss=function(a,c){$(a).children().each(function(a){var b=$(this);b.css({"background-image":"url('"+b.attr("data-img")+"')","background-repeat":b.attr("data-repeat"),height:b.attr("data-height"),width:b.attr("data-width"),"z-index":a})})};this.setupParallax=function(a,c){var d=$(a),f=d.attr("data-fps"),e=new ParallaxScroller({fps:void 0!==f?f:60});d.children().each(function(a){var b=
$(this);a=c[a];var d=this.getBoundingClientRect();e.addLayer(new Layer({element:b,xlayer:new LayerModifier({step:b.attr("data-xi"),bias:d.left,ease:void 0!==a?a.xf:void 0}),ylayer:new LayerModifier({step:b.attr("data-yi"),bias:d.top,ease:void 0!==a?a.yf:void 0})}))});e.start()}};