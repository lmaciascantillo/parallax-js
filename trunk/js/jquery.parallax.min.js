(function(){for(var a=0,b=["ms","moz","webkit","o"],d=0;d<b.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[b[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[d]+"CancelAnimationFrame"]||window[b[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,d){var e=(new Date).getTime(),g=Math.max(0,16-(e-a)),h=window.setTimeout(function(){b(e+g)},g);a=e+g;return h});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(b){clearTimeout(b)})})();function LayerModifier(a){var b=this;this.bias=this.step=this.pos=0;this.ease=function(b,a){return b*a};void 0!==a&&(this.step=void 0!==a.step?a.step:this.step,this.ease=void 0!==a.ease?a.ease:this.ease,this.bias=void 0!==a.bias?a.bias:this.bias);this.update=function(a){null!=b.ease&&(b.pos=b.ease(a,b.step));b.pos+=b.bias}}
function Layer(a){var b=null,d=null,c=null;this.update=function(a){d.update(a);c.update(a);b.css("background-position",d.pos+"px "+c.pos+"px")};configure=function(a){b=a.element;var e=b.css("background-position").split(" ");xpos=parseInt(e[0].substr(0,e[0].length-2));ypos=parseInt(e[1].substr(0,e[1].length-2));d=new LayerModifier(a.xlayer);d.pos=xpos;c=new LayerModifier(a.ylayer);c.pos=ypos};configure(a)}
function ParallaxScroller(a){function b(a){0==f&&(f=a);var c=a-f;c>=e&&(g+=c/1E3,d.render(g),f=a);requestAnimationFrame(b)}var d=this,c=[],f=0,e=1E3/60,g=0;this.addLayer=function(a){c.push(a)};this.start=function(){requestAnimationFrame(b)};this.render=function(a){for(var b=0;b<c.length;++b)c[b].update(a)};void 0!==a&&(e=void 0!==a.fps?1E3/a.fps:1E3/60)}(function(a){a.fn.parallax=function(a){this.each(function(){(new ParallaxScrollerAPI(a)).applyParallax(this)})}})(jQuery);
function ParallaxScrollerAPI(a){this.applyParallax=function(b){this.setupCss(b,a);this.setupParallax(b,a)};this.setupCss=function(a,d){var c=$(a);c.css({"list-style-type":"none"});c.children().each(function(a){var b=$(this);b.css({position:"absolute","background-attachment":"fixed","background-image":"url('"+b.attr("data-img")+"')","background-repeat":b.attr("data-repeat"),height:b.attr("data-height"),width:b.attr("data-width"),"z-index":a})})};this.setupParallax=function(a,d){var c=$(a),f=c.attr("data-fps"),
e=new ParallaxScroller({fps:void 0!==f?f:60});c.children().each(function(a){var b=$(this);a=void 0!==d?d[a]:void 0;var c=this.getBoundingClientRect();e.addLayer(new Layer({element:b,xlayer:new LayerModifier({step:b.attr("data-xi"),bias:c.left,ease:void 0!==a?a.xf:void 0}),ylayer:new LayerModifier({step:b.attr("data-yi"),bias:c.top,ease:void 0!==a?a.yf:void 0})}))});e.start()}};